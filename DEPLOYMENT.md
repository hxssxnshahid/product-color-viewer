# Deployment Guide for Product Color Viewer

## Netlify Deployment

### Prerequisites
1. Netlify account
2. Supabase project set up
3. GitHub repository
4. Environment variables configured

### Steps

1. **Prepare Environment Variables**
   Add these in Netlify dashboard under Site Settings > Environment Variables:
   ```
   VITE_SUPABASE_URL=your_supabase_project_url
   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
   ```

2. **Deploy to Netlify**
   - Connect your GitHub repository to Netlify
   - Netlify will detect the project automatically
   - Add your environment variables in Netlify dashboard
   - Deploy!

3. **Keep-Alive System**
   - **Automatic**: Runs 3 times per week (Mon, Wed, Fri at 9:00 AM UTC)
   - **Purpose**: Prevents Supabase free tier database from pausing
   - **No Configuration Needed**: Works automatically after deployment
   - The scheduled function makes lightweight queries to keep the database active
   - You can verify it's working in Netlify Functions logs

4. **Install Dependencies** (if needed locally)
   ```bash
   npm install
   ```

### Keep-Alive Configuration
The keep-alive system is configured in `netlify.toml`:
- Schedule: Every Monday, Wednesday, Friday at 9:00 AM UTC
- Function: `netlify/functions/keep-alive.ts`
- Cost: Free (within Netlify free tier limits)

---

## Vercel Deployment

### Prerequisites
1. Vercel account
2. Supabase project set up
3. Environment variables configured

### Steps

1. **Prepare Environment Variables**
   Create a `.env.local` file with:
   ```
   VITE_SUPABASE_URL=your_supabase_project_url
   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
   ```

2. **Deploy to Vercel**
   - Connect your GitHub repository to Vercel
   - Vercel will automatically detect this as a Vite project
   - Add your environment variables in Vercel dashboard
   - Deploy!

3. **Supabase Setup**
   Run the SQL commands provided below in your Supabase SQL editor.

## Supabase SQL Setup

Run these commands in your Supabase SQL Editor:

```sql
-- Create the articles table
CREATE TABLE public.articles (
  id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  article_number text NOT NULL,
  name text NULL,
  category text CHECK (category IN ('shirts','jeans','trousers')),
  CONSTRAINT articles_pkey PRIMARY KEY (id),
  CONSTRAINT articles_article_number_key UNIQUE (article_number)
);

-- Create the colors table
CREATE TABLE public.colors (
  id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  article_id bigint NOT NULL,
  image_url text NOT NULL,
  storage_path text NOT NULL,
  CONSTRAINT colors_pkey PRIMARY KEY (id),
  CONSTRAINT colors_article_id_fkey FOREIGN KEY (article_id) REFERENCES articles (id) ON DELETE CASCADE
);

-- Create a storage bucket for product color images
-- Go to the "Storage" tab in your Supabase project dashboard.
-- Click "New bucket", name it "product-colors", and make it a public bucket.

-- Set up Row Level Security (RLS) policies
-- For a quick start, you can enable read access for everyone and restrict write access.

-- Example RLS Policy for public read access on 'articles':
-- Target Roles: anon, authenticated
-- USING expression: true

-- Example RLS Policy for public read access on 'colors':
-- Target Roles: anon, authenticated  
-- USING expression: true
```

## Features Added

### Login System
- **Password**: 0000
- **Session Storage**: Remembers login state until browser tab is closed
- **Logout**: Available in header with logout button
- **Security**: Simple password-based authentication

### UI Enhancements
- Beautiful login page with animations
- Logout button in header
- Session persistence
- Responsive design

## Notes
- No database changes required for the login system
- Login state is stored in browser sessionStorage
- Password is hardcoded as "0000" for simplicity
- All existing functionality remains unchanged
